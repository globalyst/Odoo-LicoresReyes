<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
			<!-- ACCIÓN PARA EL BOTÓN DE DESCUENTOS -->
			<record id="discount_action" model="ir.actions.act_window">
				<field name="name">Descuentos</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">discount.line</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	
				<field name="context">
					{'search_default_pricelist_type_id':1}
				</field>
		</record>
		
			<!-- ACCIÓN PARA EL BOTÓN DE OFERTAS -->
			<record id="offer_action" model="ir.actions.act_window">
				<field name="name">Ofertas</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">offer</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	
				<field name="context">
					{'search_default_pricelist_type_id':1}
				</field>
		</record>
		
			<!-- ACCIÓN PARA EL BOTÓN DE PRECONDICIONES -->
			<record id="offer_precondition_action" model="ir.actions.act_window">
				<field name="name">Precondiciones</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">offer.precondition</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	
				<field name="context">
					{'search_default_pricelist_type_id':1}
				</field>
		</record>
		
			<!-- ACCIÓN PARA EL BOTÓN DE REGALOS -->
			<record id="offer_gift_action" model="ir.actions.act_window">
				<field name="name">Regalos</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">offer.gift</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	
				<field name="context">
					{'search_default_pricelist_type_id':1}
				</field>
			</record>
		
			<!-- ACCIÓN PARA HERRAMIENTA DE IMPORTACIÓN  -->
			<record id="fiscal_position_account_menu_action" model="ir.actions.act_window">
				<field name="name">Posiciones Fiscles - Cuentas</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">account.fiscal.position.account</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	
				<field name="context">
					{'search_default_pricelist_type_id':1}
				</field>
			</record>
		
			<record id="fiscal_position_tax_menu_action" model="ir.actions.act_window">
				<field name="name">Posiciones Fiscles - Cuentas</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">account.fiscal.position.tax</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	
				<field name="context">
					{'search_default_pricelist_type_id':1}
				</field>
			</record>
			
			<record id="invoice_line_menu_action" model="ir.actions.act_window">
				<field name="name">Lineas de Factura</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">account.invoice.line</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	
				<field name="context">
					{'search_default_pricelist_type_id':1}
				</field>
			</record>
			
			<record id="bank_account_menu_action" model="ir.actions.act_window">
				<field name="name">Cuentas bancarias</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">res.partner.bank</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	
				<field name="context">
					{'search_default_pricelist_type_id':1}
				</field>
			</record>
					<!-- ACCIÓN PARA HERRAMIENTA DE IMPORTACIÓN  -->
			<record id="model_data_menu_action" model="ir.actions.act_window">
				<field name="name">ir.model.data</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">ir.model.data</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>	

		</record>
		
		<menuitem id="main_licores_reyes" name="Licores Reyes" groups="base.group_user"/>
			<menuitem id="tarification_menu" name="Tarificación" parent="main_licores_reyes" groups="base.group_user"/>
				<menuitem id="discount_menu" name="Descuentos" parent="tarification_menu" action="discount_action" groups="base.group_user"/>
				<menuitem id="offer_menu" name="Ofertas" parent="tarification_menu" action="offer_action" groups="base.group_user"/>
					<menuitem id="precondition_menu" name="Precondiciones" parent="offer_menu" action="offer_precondition_action" groups="base.group_user"/>
					<menuitem id="gift_menu" name="Regalos" parent="offer_menu" action="offer_gift_action" groups="base.group_user"/>
			<menuitem id="import_menu" name="Import Tools" parent="main_licores_reyes" groups="base.group_user"/>
				<menuitem id="model_data_menu" name="IDs Externos" parent="import_menu" action="model_data_menu_action" groups="base.group_user"/>
				<menuitem id="fiscal_position_account_menu" name="Fiscal Position - Cuentas" parent="import_menu" action="fiscal_position_account_menu_action" groups="base.group_user"/>
				<menuitem id="fiscal_position_tax_menu" name="Fiscal Position - Impuestos" parent="import_menu" action="fiscal_position_tax_menu_action" groups="base.group_user"/>
				<menuitem id="invoice_line_menu" name="Lineas de Factura" parent="import_menu" action="invoice_line_menu_action" groups="base.group_user"/>
				<menuitem id="bank_account_menu" name="Cuentas bancarias" parent="import_menu" action="bank_account_menu_action" groups="base.group_user"/>
		<!-- VISTA DE ORDENES DE VENTA, PESTANAS DE OFERTAS Y DESCUENTOS-->
		<record id="offer_sale_order_form_view" model="ir.ui.view">
		<field name="name">sale.order.form</field>
		<field name="model">sale.order</field>
		<field name="inherit_id" ref="sale.view_order_form"/>
		<field name="arch" type="xml">
			 <xpath expr="//page[@string='Order Lines']/field[@name='order_line']/tree[@string='Sales Order Lines']/field[@name='price_unit']" position="before">
				<field name="pricelist_price" readonly="1"/>		
			</xpath>

			<xpath expr="//page[@string='Order Lines']" position='after'>
				<page string='Ofertas'>
	    			<field name="offers_lines">
						<tree string="Lineas de Ofertas" editable="bottom"> 
							<field name="offer_ref"/>
							<field name="accumulations"/>
							<field name="is_active"/>
						</tree>
					</field>
					<button name="apply_discountsAndOffers" type="object" string="Aplicar Ofertas" class="oe_highlight" />
				</page>
				<page string='Descuentos'>
	    			<field name="discount_lines">
						<tree string="Lineas de Descuentos" editable="bottom"> 
							<field name="product_id"/>
							<field name="is_active"/>
							<field name="percentage"/>
							<field name="fix_price"/>	
							<field name="fix_discount"/>							
						</tree>
					</field>
					<button name="apply_discountsAndOffers" type="object" string="Aplicar Ofertas" class="oe_highlight" />
				</page>
			</xpath>
			<xpath expr="//field[@name='order_line']" position='after'>
				<button name="apply_discountsAndOffers" type="object" string="Aplicar Ofertas" class="oe_highlight" />
			</xpath>
		</field>
	</record>
	
		<!-- VISTA DE ORDENES DE VENTA, PESTANAS DE OFERTAS Y DESCUENTOS-->
	<record id="product_pricelist_form_view_with_duplicate" model="ir.ui.view">
		<field name="name">product.pricelist.form</field>
		<field name="model">product.pricelist</field>
		<field name="inherit_id" ref="product.product_pricelist_view"/>
		<field name="arch" type="xml">
			 <xpath expr="//tree[@string='Pricelist Version']/field[@name='date_end']" position="after">
				<button name="duplicate" type="object" string="Duplicar" class="oe_highlight" />
			</xpath>
		</field>
	</record>
	
   </data>
</openerp>